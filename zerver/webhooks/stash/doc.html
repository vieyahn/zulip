<h4>Stash</h4>

<p>
    See what the team is committing to Stash right in Zulip with the Zulip
    Stash plugin!
</p>

<p>
    First, create the stream you'd like to use for Stash notifications, and
    subscribe all interested parties to this stream. We recommend the
    name <code>commits</code>.
</p>

<p>Next, on your {{ settings_html|safe }}, create a Stash bot.</p>

<p>Then:</p>

<ol>
    <li>
        <p>
            Visit the Settings page for the Project that you'd like to generate
            Zulip notifications. Click the "Hooks" option in the left sidebar, and
            click "Add Hook" on the resulting page. Click the "Search for hook
            plugins" link:
        </p>

        <img class="screenshot" src="/static/images/integrations/stash/001.png"/>
    </li>
    <li>
        <p>
            On the search results page, look for and install the "Post-Receive
            WebHook for Stash" plugin:
        </p>

        <img class="screenshot" src="/static/images/integrations/stash/002.png"/>
    </li>
    <li>
        <p>
            Return to the Settings page for this Project and click the "Hooks"
            option in the left sidebar. The newly-installed post-receive webhook
            plugin is now listed in the "Post-receive" hooks section. Click the
            edit icon next to the hook to configure it:
        </p>

        <img class="screenshot" src="/static/images/integrations/stash/003.png"/>
    </li>
    <li>
        <p>
            Supply the following webhook URL, replacing the bot email address,
            bot API key, and Zulip stream with the appropriate
            information. <b>Note:</b> the <code>@</code>-sign in the bot e-mail
            address must be escaped to <code>%40</code>:
        </p>

        <p>
            <code>{{ external_uri_scheme }}<font color="#00A26F">stash-bot%40example.com</font>:<font color="#00A26F">api_key</font>@{{ external_api_path_subdomain }}/v1/external/stash?stream=<font color="#00A26F">commits</font></code>
        </p>

        <img class="screenshot" src="/static/images/integrations/stash/004.png"/>
    </li>
</ol>

<p>
    <b>Congratulations! You're done!</b><br/> When you push to Stash, the
    team can see these updates in real time in Zulip:
</p>

<img class="screenshot" src="/static/images/integrations/stash/005.png"/>
